{"version":3,"sources":["../src/util.js"],"names":[],"mappings":";;;;;;;;;oBAAiB,MAAM;;;;uBACH,SAAS;;;;kBACd,IAAI;;;;0BACM,WAAW;;;;mBACpB,KAAK;;;;0BACE,aAAa;;;;AAC7B,MAAM,IAAI,GAAG,kBAAK,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;;AAC5C,MAAM,KAAK,GAAG,wBAAW,MAAM,CAAC;;;;AAEhC,SAAS,SAAS,CAAC,OAAO,EAAE;AACjC,OAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACtB,QAAM,UAAU,GAAG,4BAAa;AAC9B,SAAK,EAAE,IAAI;AACX,UAAM,EAAE,GAAG;GACZ,CAAC,CAAC;;AAEH,QAAM,UAAU,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC1D,YAAU,CAAC,WAAW,GAAG,qBAAQ,OAAO,CAAC,WAAU,IAAI,EAAE;AACvD,UAAM,OAAO,GAAG,MAAM,iBAAI,OAAO,CAAC,EAAE,QAAQ,EAAE,2BAA2B,EAAE,EAAE,qBAAQ,MAAM,EAAE,CAAC,CAAC;AAC/F,UAAM,KAAK,GAAG,WAAW,CAAC;AAC1B,UAAM,MAAM,GAAG,MAAM,UAAU,CAAC,OAAO,EAAE,qBAAQ,MAAM,EAAE,CAAC,CAAC;AAC3D,WAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACpB,UAAM,OAAO,CAAC,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AACzC,UAAM,gBAAG,MAAM,CAAC,OAAO,EAAE,qBAAQ,MAAM,EAAE,CAAC,CAAC;AAC3C,WAAO,MAAM,CAAC;GACf,CAAC,CAAC;AACH,SAAO,UAAU,CAAC;CACnB","file":"util.js","sourcesContent":["import path from 'path';\nimport suspend from 'suspend';\nimport fs from 'fs';\nimport nightmareLib from 'nightmare';\nimport tmp from 'tmp';\nimport checkTypes from 'check-types';\nexport const root = path.join(__dirname, '../lib');\nexport const check = checkTypes.assert;\n\nexport function nightmare(control) {\n  check.object(control);\n  const _nightmare = nightmareLib({\n    width: 1600,\n    height: 900\n  });\n  \n  const screenshot = _nightmare.screenshot.bind(_nightmare);\n  _nightmare.$screenshot = suspend.promise(function*(name) {\n    const tmpName = yield tmp.tmpName({ template: '/tmp/nightmare-tmp-XXXXXX' }, suspend.resume());\n    const media = 'image/png';\n    const result = yield screenshot(tmpName, suspend.resume());\n    console.log(result);\n    yield control.file(name, tmpName, media);\n    yield fs.unlink(tmpName, suspend.resume());\n    return result;\n  });\n  return _nightmare;\n}\n"]}